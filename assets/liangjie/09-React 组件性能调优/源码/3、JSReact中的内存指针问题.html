<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="UTF-8">
    <title>JS/React中的内存指针问题</title>
</head>
<body>
    <script src="./react-0.13.2/react-0.13.2/build/react.js"></script>
    <script src="./react-0.13.2/react-0.13.2/build/JSXTransformer.js"></script>
    <script type="text/jsx">
        var HelloWorld = React.createClass({
            getInitialState: function () {  //初始化状态
                return {value:{foo:'bar'}};
            },
            handleClick: function (event) {
                //console.log(event.target);

                //这里不光是赋值，如果this.state.value（既：{foo:'bar'}）是个对象。那么这里还是指针指向内存。
                //反之 如果this.state.value 是原始值（例：3）。那么内存就有两个3（既：变量value、数字this.state.value）。
                var value = this.state.value;
                value.foo += 'bar';
                console.log(this.state.value);   //问题出现了。既这一步 已经修改了。
                this.setState({value:value});
                console.log(this.state.value);   //即便更新转台，也没用了。
            },
            render: function () {
                return <div>
                <b onClick={this.handleClick}>Click Me</b>
                </div>;
            },
        });
        React.render(<HelloWorld></HelloWorld>, document.body);
    </script>
</body>
</html>
